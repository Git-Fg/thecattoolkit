# Marketplace & Registry Reference

This document defines the schemas and protocols for the "Marketplace" and "Registry" layers of our system. It is derived from the investigation of `anthropics/claude-code`, `anthropics/skills`, and the Model Context Protocol (MCP) ecosystem.

## 1. Marketplace Manifest (`marketplace.json`)

The **Standard Marketplace Schema** used to aggregate and distribute plugins.

**Location**: `.claude-plugin/marketplace.json` (Repository Root of a Marketplace)

```json
{
  "$schema": "https://json.schemastore.org/claude-marketplace-1.0.0.json",
  "name": "The Cat Toolkit Official Marketplace",
  "version": "1.0.0",
  "description": "Official registry for The Cat Toolkit plugins and skills.",
  "owner": {
    "name": "The Cat Toolkit Team",
    "url": "https://github.com/thecattoolkit"
  },
  "plugins": [
    {
      "name": "meta",
      "source": "github:thecattoolkit/plugins/meta",
      "description": "Core meta-programming capabilities",
      "version": "1.0.0",
      "category": "core",
      "tags": ["system", "maintenance"]
    },
    {
      "name": "strategist",
      "source": "github:thecattoolkit/plugins/strategist",
      "description": "High-level planning and reasoning agents",
      "version": "1.2.0",
      "category": "productivity",
      "tags": ["planning", "reasoning", "agents"]
    }
  ]
}
```

### Key Fields
- **`plugins` Array**: The core registry. Each entry MUST have `name` and `source`.
- **`source` URI**: Supports `github:`, `npm:`, or direct `https:` protocols.
- **`category`**: Enforces strict categorization (e.g., `core`, `productivity`, `security`, `language`).

## 2. Plugin Manifest (`plugin.json`)

The **Standard Plugin Definition** required for every plugin.

**Location**: `.claude-plugin/plugin.json` (Plugin Root)

```json
{
  "$schema": "https://json.schemastore.org/claude-plugin-1.0.0.json",
  "name": "strategist",
  "version": "1.2.0",
  "description": "High-level planning and reasoning agents",
  "author": {
    "name": "Felix",
    "email": "felix@example.com"
  },
  "capabilities": ["agents", "skills", "commands"],
  "icon": "brain",
  "readme": "README.md",
  "license": "MIT"
}
```

## 3. MCP & Agent Skills Registry

While `marketplace.json` aggregates *plugins*, specific "Skills" and "MCP Servers" can also be distributed via the **Model Context Protocol**.

### MCP Server Registry
- **Standard**: `server.json` (generated by `mcp-publisher`).
- **Use Case**: When a plugin's primary value is providing *tools* rather than *agents* or *commands*.
- **Integration**: A plugin can *contain* an MCP server definition in `.mcp.json`, which the host system reads to spawn the server.

### Agent Skills Standard
- **Format**: `SKILL.md` (YAML Frontmatter + Markdown).
- **Discovery**: Skills are auto-discovered by the `SkillsManager` from:
  1.  `~/.github/skills/` (User Global)
  2.  `.github/skills/` (Repository)
  3.  `plugins/*/skills/` (Installed Plugins)

## 4. Implementation Strategy for The Cat Toolkit

1.  **Adopt `marketplace.json`**: Create a `marketplace.json` at the root of our repo (or a dedicated registry repo) to list our available plugins.
2.  **Standardize `plugin.json`**: Ensure every plugin in `plugins/` has a valid manifest.
3.  **Hybrid Skills**: Use `SKILL.md` for individual skills within plugins, but use `plugin.json` to "package" them for easy installation.

---
**References**:
- `anthropics/claude-code` Wiki: Plugin System
- `CloudAI-X/claude-workflow-v2`
- MCP Registry Specs
